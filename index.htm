<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pong 2x2</title>
  <style>
    html,body {
      height: 100%;
      width:  100%;
      padding: 0;
      margin: 0;
    }
    * {
      box-sizing:border-box;
    }

    .paddle {
      position: fixed; 
      /* fixed or absolute? */
      background-color: lightseagreen;
    }

    .paddle-horizontal {
      width: 100px;
      height: 20px;
    }

    .paddle-vertical {
      width: 20px;
      height: 100px;
    }

    .paddle-top {
      top: 0;
    }

    .paddle-bottom {
      bottom: 0;
    }

    .paddle-left {
      left: 0;
    }

    .paddle-right {
      right: 0;
    }

    .ball {
      position: fixed;
      height: 25px;
      width: 25px;
      background-color: purple;
      border-radius: 50%;
      display: inline-block;
      /* Starting position */
      top: 123px;
      left: 123px;
    }

    .container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    }
  </style>

  <script>
    let interval;
    const ballSize = 25; // px
    let distanceHorizontal = 3;
    let distanceVertical = 3;

    document.addEventListener("keypress", function(event){
      var x = event.which || event.keyCode;
      if (x == 32) { // 32 is spacebar key
        startStop();
      }
    })
    document.addEventListener("click", startStop);
    document.onmousemove = handleMouseMove;

    function handleMouseMove(event) {
      event = event || window.event; // IE
      const mouseX = event.pageX;
      const mouseY = event.pageY;
      
      const top = document.querySelector('.paddle-top');
      const bottom = document.querySelector('.paddle-bottom');
      const left = document.querySelector('.paddle-left');
      const right = document.querySelector('.paddle-right');

      const horizontals = document.querySelectorAll('.paddle-horizontal')
      const verticals = document.querySelectorAll('.paddle-vertical')

      horizontals.forEach((paddle) => {
        paddle.style.left = (mouseX - 50) + "px";
      })
      
      verticals.forEach((paddle) => {
        paddle.style.top = (mouseY - 50) + "px";
      })
    }

    function startStop() {
      // console.log('startStop', interval);
      if (interval) {
        stopBall();
      } else {
        startBall();
      }
    }

    function startBall() {
      const ball = document.querySelector('.ball');
      let top;
      let left
      interval = setInterval(moveBall, 10);
      function moveBall(){ 
        top = ball.offsetTop;
        left = ball.offsetLeft;
        ball.style.top = (top + distanceVertical) + "px";
        ball.style.left = (left + distanceHorizontal) + "px";
        checkBounce(top, left)
      }
    }

    function stopBall() {
      clearInterval(interval);
      interval = undefined;
    }

    function checkBounce(top, left) {
      const right = left + ballSize
      const bottom = top + ballSize
      if (right >= window.innerWidth) {
        distanceHorizontal = -Math.abs(distanceHorizontal);
      }
      if (left <= 0) {
        distanceHorizontal = Math.abs(distanceHorizontal);
      }

      if (bottom >= window.innerHeight) {
        distanceVertical = -Math.abs(distanceVertical);
      }

      if (top <= 0) {
        distanceVertical = Math.abs(distanceVertical);
      }
      
    }
</script>
</head>
<body>

  <div class="container">
    <div class="paddle paddle-horizontal paddle-top"></div>
    <div class="paddle paddle-horizontal paddle-bottom"></div>

    <div class="paddle paddle-vertical paddle-left"></div>
    <div class="paddle paddle-vertical paddle-right"></div>
    
    <div class="ball"></div>

    <h1>Click to start.</h1>
  </div>

</body>
</html>